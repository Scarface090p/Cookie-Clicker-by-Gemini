<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Cookie Clicker: Complete Edition</title>
    <style>
        :root { --border: #5d4037; --gold: #e1b12c; }
        body { margin: 0; background: #000; color: white; font-family: "Trebuchet MS", sans-serif; display: flex; height: 100vh; overflow: hidden; user-select: none; }

        /* Panels */
        #left { flex: 1; background: linear-gradient(to bottom, #2980b9, #6dd5fa, #ffffff); border-right: 4px solid var(--border); display: flex; flex-direction: column; align-items: center; position: relative; }
        #center { flex: 1.2; background: #111; border-right: 4px solid var(--border); display: flex; flex-direction: column; }
        #right { width: 350px; background: #333; overflow-y: auto; border-left: 2px solid #222; }

        /* Cookie Stats */
        #stats { background: rgba(0,0,0,0.8); width: 100%; text-align: center; padding: 20px 0; border-bottom: 2px solid var(--border); z-index: 5; }
        #cookie { font-size: 160px; cursor: pointer; margin-top: 50px; transition: transform 0.05s; filter: drop-shadow(0 0 20px rgba(0,0,0,0.5)); }
        #cookie:active { transform: scale(0.9); }

        /* Upgrade Bar & Achievements */
        #tech-bar { display: flex; flex-wrap: wrap; gap: 5px; padding: 10px; background: #222; min-height: 50px; border-bottom: 2px solid var(--border); }
        .tech { width: 45px; height: 45px; background: #444; border: 2px solid var(--gold); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 24px; }
        .tech.disabled { filter: grayscale(1); opacity: 0.4; cursor: not-allowed; }
        
        #achievements-area { flex-grow: 1; padding: 10px; overflow-y: auto; background: #0a0a0a; }
        .ach-row { display: flex; align-items: center; gap: 10px; padding: 8px; margin-bottom: 5px; background: #1a1a1a; border-radius: 4px; opacity: 0.3; transition: opacity 0.5s; }
        .ach-row.unlocked { opacity: 1; border: 1px solid var(--gold); }

        /* Store Items */
        .item { display: flex; align-items: center; padding: 12px; border-bottom: 1px solid #222; background: #4a4a4a; cursor: pointer; transition: 0.1s; }
        .item:hover:not(.disabled) { background: #5a5a5a; }
        .item.disabled { opacity: 0.4; cursor: not-allowed; filter: grayscale(0.8); }
        .item-icon { width: 50px; height: 50px; background: #222; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 32px; margin-right: 12px; border: 1px solid #666; }
        .item-info { flex-grow: 1; }
        .item-name { font-weight: bold; font-size: 18px; display: block; }
        .item-cost { color: #66ff66; font-weight: bold; font-size: 14px; }
        .item-count { font-size: 32px; opacity: 0.2; font-weight: bold; }

        /* Notifications */
        .floating { position: fixed; pointer-events: none; font-weight: bold; font-size: 26px; color: white; text-shadow: 2px 2px black; animation: float 0.8s forwards; z-index: 1000; }
        @keyframes float { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-120px); opacity: 0; } }
        
        #news { padding: 10px; text-align: center; font-style: italic; background: #000; font-size: 14px; color: #aaa; border-top: 2px solid var(--border); }
    </style>
</head>
<body>

    <div id="left">
        <div id="stats">
            <div id="cookies-display" style="font-size: 32px; font-weight: bold;">0 cookies</div>
            <div id="cps-display" style="color: #ccc;">per second: 0</div>
        </div>
        <div id="cookie">üç™</div>
    </div>

    <div id="center">
        <div style="background:#444; padding:8px; text-align:center; color:var(--gold); font-weight:bold;">UPGRADES</div>
        <div id="tech-bar"></div>
        <div style="background:#444; padding:8px; text-align:center; color:var(--gold); font-weight:bold; border-top: 2px solid var(--border);">ACHIEVEMENTS</div>
        <div id="achievements-area"></div>
        <div id="news">"Welcome to your cookie empire."</div>
        <div style="padding:15px; background:#111; display:flex; gap:10px; justify-content:center;">
            <button onclick="save()">Save Game</button>
            <button onclick="reset()">Hard Reset</button>
        </div>
    </div>

    <div id="right">
        <div style="background:#444; padding:15px; text-align:center; color:var(--gold); font-weight:bold; font-size:20px; border-bottom: 2px solid var(--border);">STORE</div>
        <div id="store-list"></div>
    </div>

    <script>
        let state = {
            cookies: 0, baked: 0, clicks: 0, clickVal: 1,
            ownedTech: [], unlockedAch: [],
            buildings: {
                cursor:  { n: "Cursor",   c: 15,     cps: 0.1, cnt: 0, i: "üñ±Ô∏è" },
                grandma: { n: "Grandma",  c: 100,    cps: 1,   cnt: 0, i: "üëµ" },
                farm:    { n: "Farm",     c: 1100,   cps: 8,   cnt: 0, i: "üöú" },
                mine:    { n: "Mine",     c: 12000,  cps: 47,  cnt: 0, i: "‚õèÔ∏è" },
                factory: { n: "Factory",  c: 130000, cps: 260, cnt: 0, i: "üè≠" },
                bank:    { n: "Bank",     c: 1400000,cps: 1400,cnt: 0, i: "üè¶" },
                temple:  { n: "Temple",   c: 20000000,cps: 7800,cnt: 0,i: "üïç" },
                wizard:  { n: "Wizard",   c: 330000000,cps: 44000,cnt:0,i: "üßô" },
                ship:    { n: "Ship",     c: 5100000000,cps: 260000,cnt:0,i: "üöÄ" },
                alch:    { n: "Alchemy",  c: 75000000000,cps: 1600000,cnt:0,i: "‚öóÔ∏è" },
                portal:  { n: "Portal",   c: 1000000000000,cps: 10000000,cnt:0,i: "üåÄ" },
                time:    { n: "Time Machine", c: 14000000000000,cps: 65000000,cnt:0,i: "‚è≥" }
            }
        };

        const upgrades = [
            { id: 'u1', n: 'Reinforced Finger', cost: 100, type: 'click', mult: 2, i: '‚òùÔ∏è', req: () => state.clicks >= 10 },
            { id: 'u2', n: 'Rolling Pins', cost: 500, type: 'grandma', mult: 2, i: 'ü•¢', req: () => state.buildings.grandma.cnt >= 1 },
            { id: 'u3', n: 'Iron Mouse', cost: 2000, type: 'click', mult: 2, i: 'üñ±Ô∏è', req: () => state.clicks >= 100 },
            { id: 'u4', n: 'Fertilizer', cost: 10000, type: 'farm', mult: 2, i: 'üå±', req: () => state.buildings.farm.cnt >= 1 }
        ];

        const achievements = [
            { id: 'a1', n: 'Wake and Bake', d: 'Bake 1,000 cookies.', check: () => state.baked >= 1000, i: 'üç™' },
            { id: 'a2', n: 'Click Junkie', d: 'Click the cookie 100 times.', check: () => state.clicks >= 100, i: 'üñ±Ô∏è' },
            { id: 'a3', n: 'Cookie Billionaire', d: 'Bake 1,000,000 cookies.', check: () => state.baked >= 1000000, i: 'üí∞' }
        ];

        function getCPS() {
            let total = 0;
            for (let k in state.buildings) {
                let b = state.buildings[k];
                let m = 1;
                state.ownedTech.forEach(tid => {
                    let u = upgrades.find(x => x.id === tid);
                    if (u && u.type === k) m *= u.mult;
                });
                total += (b.cnt * b.cps * m);
            }
            return total;
        }

        function refresh() {
            document.getElementById('cookies-display').innerText = Math.floor(state.cookies).toLocaleString() + " cookies";
            document.getElementById('cps-display').innerText = "per second: " + getCPS().toFixed(1);

            // Store
            let sHtml = '';
            for (let k in state.buildings) {
                let b = state.buildings[k];
                sHtml += `<div class="item ${state.cookies < b.c ? 'disabled' : ''}" onclick="buyBuilding('${k}')">
                    <div class="item-icon">${b.i}</div>
                    <div class="item-info"><span class="item-name">${b.n}</span><span class="item-cost">${Math.ceil(b.c).toLocaleString()}</span></div>
                    <div class="item-count">${b.cnt}</div>
                </div>`;
            }
            document.getElementById('store-list').innerHTML = sHtml;

            // Upgrades
            let tHtml = '';
            upgrades.forEach(u => {
                if (!state.ownedTech.includes(u.id) && u.req()) {
                    tHtml += `<div class="tech ${state.cookies < u.cost ? 'disabled' : ''}" onclick="buyUpgrade('${u.id}')" title="${u.n}">${u.i}</div>`;
                }
            });
            document.getElementById('tech-bar').innerHTML = tHtml;

            // Achievements
            let aHtml = '';
            achievements.forEach(a => {
                let isU = state.unlockedAch.includes(a.id);
                if (a.check() && !isU) state.unlockedAch.push(a.id);
                aHtml += `<div class="ach-row ${state.unlockedAch.includes(a.id) ? 'unlocked' : ''}">
                    <div style="font-size:24px;">${a.i}</div>
                    <div><b>${a.n}</b><br><small>${a.d}</small></div>
                </div>`;
            });
            document.getElementById('achievements-area').innerHTML = aHtml;
        }

        function buyBuilding(k) {
            let b = state.buildings[k];
            if (state.cookies >= b.c) {
                state.cookies -= b.c;
                b.cnt++;
                b.c *= 1.15;
                refresh();
            }
        }

        function buyUpgrade(id) {
            let u = upgrades.find(x => x.id === id);
            if (state.cookies >= u.cost) {
                state.cookies -= u.cost;
                state.ownedTech.push(id);
                if (u.type === 'click') state.clickVal *= u.mult;
                refresh();
            }
        }

        document.getElementById('cookie').onclick = (e) => {
            state.cookies += state.clickVal;
            state.baked += state.clickVal;
            state.clicks++;
            const f = document.createElement('div');
            f.className = 'floating';
            f.style.left = e.clientX + 'px'; f.style.top = e.clientY + 'px';
            f.innerText = "+" + state.clickVal;
            document.body.appendChild(f);
            setTimeout(() => f.remove(), 800);
            refresh();
        };

        function save() { localStorage.setItem('cookie_v4', JSON.stringify(state)); }
        function reset() { if(confirm("Wipe all progress?")) { localStorage.clear(); location.reload(); }}

        const saved = localStorage.getItem('cookie_v4');
        if (saved) {
            state = Object.assign(state, JSON.parse(saved));
            state.clickVal = 1;
            state.ownedTech.forEach(id => {
                let u = upgrades.find(x => x.id === id);
                if(u && u.type === 'click') state.clickVal *= u.mult;
            });
        }

        setInterval(() => { state.cookies += (getCPS()/10); state.baked += (getCPS()/10); refresh(); }, 100);
        setInterval(save, 30000);
        refresh();
    </script>
</body>
</html>
